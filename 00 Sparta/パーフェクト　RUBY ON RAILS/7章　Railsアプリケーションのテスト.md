# テストコードをどう書いていくか。
テストを書く理由
- テストを書くことで対象のアプリケーションの仕様及び設計について考えが深まり、プロダクトコードへフィードバックされる
- テストコードを利用して開発を進めるTDDと呼ばれる手法で開発を推進させる
- 手作業によるテストを減らすことができる
- 「ここはちゃんと動くだろうか」という不安を減らせる
- リファクタリングや仕様の変更に自信を持って対応できる

### 既存のアプリケーションにテストを書く
システムテストから導入するのが良い
- 外から見たアプリケーションの動作が分かればテストをかけるので、概要を掴んだ段階でテストを描き始めることができる。
- routes、コントローラ、モデル、ビューの全てを通るのでテストカバレッジを効率よく広げることができる。

一方、システムテストで全てをカバーしようとすると次のような問題がある。
- テスト実行時にブラウザを使うため、実行速度が遅い
- アプリケーション全体での動作はテストできるがモデルなど部品ごとの仕様はわからず、またそれぞれが正しく動いているのかの確認ができない

まずはシステムテストで広範囲にテストを書き、それで足りない部分を各種テストを使って埋めていくと効率よくテストを書いていくことができる。

## minitestとRSpec
ここは読んで

## テストデータを作成する
読んで

## コントローラに対する機能テスト
コントローラに対する機能テスト（Function Test）はHTTPメソッドGETに加えてPOST、UPDATE,DELETEなどでアクセスするテストを明示して簡単に書くことができます。

ブラウザを起動しないため高速に実行することができる。

システムテストでは都合の悪いケース
- GET以外のHTTPメソッドでのリクエストを直接することができない
- ブラウザを動作させるためにテストの実行に時間がかかる

反対にシステムテストでしかできないこと
- ブラウザ上でJSの動作まで含めて確認すること
- フォームへ値を入力して登録する時の動作を確認する
- 失敗した時の画面スクリーンショットを撮る

## モデルに対するテスト
モデルテストでできる項目
- 各メソッドが期待通りの値を返すか
- 各メソッドが期待通りの副作用をもたらしてくれるか
- バリデーションが正しく設定されているか
